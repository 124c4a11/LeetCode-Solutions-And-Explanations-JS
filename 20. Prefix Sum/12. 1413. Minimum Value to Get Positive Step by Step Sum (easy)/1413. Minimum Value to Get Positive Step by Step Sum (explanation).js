/**
 * @param {number[]} nums
 * @return {number}
 *
 * minStartValue вычисляет и возвращает минимальное
 * положительное начальное значение startValue, при
 * котором при поэтапном (префиксном) суммировании
 * этого startValue с элементами массива nums
 * (слева направо) ни одна промежуточная сумма не
 * станет меньше 1.
 *
 * Параметры:
 *   nums — массив целых чисел. Массив может
 *   содержать положительные числа, отрицательные
 *   числа и нули.
 *
 *
 * Пример для:
 *   nums = [-3,2,-3,4,2]
 * Результат:
 *   5
 * Пояснение:
 *   Если выбрать startValue = 4, то на третьей
 *   итерации поэтапная сумма станет меньше 1.
 *
 *   Поэтапная сумма:
 *   startValue = 4    startValue = 5    nums
 *   (4 - 3) = 1       (5 - 3) = 2        -3
 *   (1 + 2) = 3       (2 + 2) = 4         2
 *   (3 - 3) = 0       (4 - 3) = 1        -3
 *   (0 + 4) = 4       (1 + 4) = 5         4
 *   (4 + 2) = 6       (5 + 2) = 7         2
 */
function minStartValue(nums) {

  // Инициализация переменной currSum, которая будет
  // хранить текущую накопленную префиксную сумму
  // при проходе по массиву.
  //
  // Изначально 0, затем на каждом шаге
  // увеличивается на очередной элемент num.
  let currSum = 0;

  // minSum отслеживает минимальное значение,
  // которое когда-либо принимала currSum на
  // протяжении обхода.
  //
  // Инициализируем Infinity, чтобы при первом
  // сравнении любое реальное значение currSum стало
  // меньше.
  let minSum = Infinity;

  // Перебираем все элементы массива nums в порядке
  // следования.
  for (const num of nums) {

    // Прибавляем текущий элемент массива к
    // накопленной сумме currSum.
    //
    // currSum отражает сумму всех элементов,
    // пройденных до текущего шага включительно.
    currSum += num;

    // Обновляем minSum:
    // Выбираем минимальное из предыдущего minSum и
    // текущего currSum.
    //
    // Это позволяет запомнить самую маленькую
    // префиксную сумму, которая встречалась при
    // последовательном добавлении элементов.
    minSum = Math.min(minSum, currSum);
  }

  // Вычисляем и возвращаем минимально необходимое
  // стартовое значение.
  //
  // Если minSum >= 1, то даже при стартовом
  // значении 1 префиксные суммы никогда не
  // опустятся ниже 1, поэтому ответ — 1.
  //
  // Если minSum < 1, то нужно увеличить стартовое
  // значение на величину (1 - minSum), чтобы
  // самая маленькая префиксная сумма стала ровно 1.
  //
  // Math.max(1, 1 - minSum) гарантирует, что
  // возвращаемое значение не меньше 1.
  //
  // Пример:
  // Если minSum = -4, то 1 - (-4) = 5 — значит
  // стартовое значение должно быть 5.
  //
  // Особый случай:
  // Если nums пустой массив, minSum останется
  // Infinity, тогда 1 - minSum = -Infinity, и
  // Math.max(1, -Infinity) вернёт 1, что логично
  // — для пустого массива достаточно стартового 1.
  return Math.max(1, 1 - minSum);
}
