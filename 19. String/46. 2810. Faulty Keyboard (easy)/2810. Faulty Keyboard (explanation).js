/**
 * @param {string} s
 * @return {string}
 * 
 * finalString принимает строку s и возвращает новую
 * строку, в которой все символы, кроме 'i', добавляются
 * последовательно, а при встрече символа 'i' текущий
 * накопленный порядок символов инвертируется.
 * 
 * Символы 'i' в итог не попадают. 
 * 
 * 
 * Пример для:
 *   s = "string"
 * Результат:
 *   "rtsng"
 * Пояснение:
 *   После ввода первого символа текст на экране: "s".
 * 
 *   После ввода второго символа текст на экране: "st".
 * 
 *   После ввода третьего символа текст на экране: "str".
 * 
 *   Четвёртый символ — 'i', поэтому накопленный текст
 *   переворачивается и становится "rts".
 * 
 *   После ввода пятого символа текст на экране: "rtsn".
 * 
 *   После ввода шестого символа текст на экране: "rtsng".
 * 
 *   Следовательно, функция возвращает "rtsng".
 */
function finalString(s) {

  // Создаётся пустой массив result.
  //
  // Он будет использоваться как динамическая структура,
  // куда мы будем добавлять символы из строки s, и, при
  // встрече символа 'i' разворачивать порядок уже
  // добавленных символов в result.
  const result = [];

  // Итерация по символам строки s
  for (const char of s) {

    // Если символ равен 'i', выполняется инверсия
    // порядка элементов в массиве result.
    // 
    // Метод reverse() изменяет массив на месте
    // (мутабельная операция) и имеет линейную сложность
    // по текущей длине массива.
    // 
    // Частые вызовы reverse внутри цикла могут привести
    // к квадратичной суммарной сложности в худшем случае.
    //
    // Это ключевая операция алгоритма: символ 'i' не
    // добавляется в результат, а служит командой
    // "реверс".
    if (char === 'i') result.reverse();

    // Если текущий символ не равен 'i', он добавляется
    // в конец массива result.
    else result.push(char);
  }

  // После обработки всех символов массива result
  // преобразуется в строку методом join('').
  // 
  // join('') объединяет элементы массива без разделителя.
  // 
  // Если массив пуст, возвращается пустая строка.
  // 
  // Возвращаемое значение — итоговая строка,
  // сформированная с учётом всех инверсий и добавлений.
  return result.join('');
}
