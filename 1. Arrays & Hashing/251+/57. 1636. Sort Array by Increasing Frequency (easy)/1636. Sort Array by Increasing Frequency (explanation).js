/**
 * @param {number[]} nums
 * @return {number[]}
 * 
 * frequencySort принимает массив чисел nums и возвращает тот же
 * массив, отсортированный по возрастанию частоты появления
 * элементов, а при равной частоте — по убыванию значения числа
 * (большие числа идут раньше).  
 * 
 * Пример для:
 *   nums = [2,3,1,3,2]
 * Результат:
 *   [1,3,3,2,2]
 * Пояснение:
 *   '2' и '3' оба имеют частоту 2, поэтому они отсортированы в
 *   порядке убывания значения.
 */
function frequencySort(nums) {

  // Создаём Map для хранения частот:
  // - ключ — число из массива
  // - значение — количество его вхождений
  const numToFreq = new Map();

  // Итерация по каждому элементу входного массива nums
  for (const num of nums) {

    // Получаем текущую частоту для числа num из Map
    //
    // Если ключа ещё нет, выражение numToFreq.get(num)
    // вернёт undefined, поэтому используется nullish
    // coalescing (??) чтобы заменить undefined на 0
    // 
    // Затем увеличиваем полученное значение на 1 и
    // записываем его в Map
    numToFreq.set(num, (numToFreq.get(num) ?? 0) + 1);
  }

  // Сортируем исходный массив nums с использованием
  // пользовательской функции сравнения и возвращаем
  // его
  //
  // Cортировка выполняется in-place и возвращает ссылку
  // на тот же массив
  return nums.sort((a, b) => {

    // Получаем частоту элемента a из Map
    const aFreq = numToFreq.get(a);

    // Получаем частоту элемента b из Map
    const bFreq = numToFreq.get(b);

    // Если частоты равны, применяем вторичный
    // критерий сортировки:
    //
    // По значению числа в порядке убывания (большее
    // число должно идти раньше). 
    //
    // Возвращаемое значение
    // положительное/отрицательное определяет
    // порядок элементов
    if (aFreq === bFreq) return b - a;

    // Если частоты различаются, сортируем по частоте
    // в порядке возрастания (элементы с меньшей
    // частотой идут раньше).
    //
    // Возвращаемое значение aFreq - bFreq
    // обеспечивает требуемый порядок
    return aFreq - bFreq;
  });
}
