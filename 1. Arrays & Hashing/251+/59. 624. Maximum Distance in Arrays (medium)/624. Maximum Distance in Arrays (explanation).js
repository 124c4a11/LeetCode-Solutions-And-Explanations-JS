/**
 * @param {number[][]} arrays
 * @return {number}
 * 
 * maxDistance, принимает массив
 * отсортированных массивов чисел.
 * 
 * Каждый вложенный массив гарантированно
 * отсортирован по возрастанию.
 * 
 * Цель функции — найти максимальную возможную
 * абсолютную разницу между элементами, которые
 * принадлежат двум разным массивам.
 * 
 * 
 * Пример для:
 *   arrays = [[1,2,3],[4,5],[1,2,3]]
 * Результат:
 *   4
 * Пояснение:
 *   Один из способов получить максимальную
 *   разницу 4 — выбрать 1 из первого или
 *   третьего массива и выбрать 5 из второго
 *   массива.
 */
function maxDistance(arrays) {

  // Переменная result будет хранить
  // максимальную найденную дистанцию.
  //
  // Изначально она равна 0, так как мы ещё не
  // проверили ни одной пары.
  let result = 0;

  // Устанавливаем глобальный минимальный
  // элемент min, используя первый элемент первого
  // массива.
  //
  // Так как массивы отсортированы, первый элемент
  // — это реальный минимум этого массива.
  let min = arrays[0][0];

  // Устанавливаем глобальный максимальный элемент
  // max, используя последний элемент первого
  // массива.
  //
  // Метод .at(-1) берёт последний элемент массива.
  let max = arrays[0].at(-1);

  // Начинаем цикл со второго массива (i = 1), так
  // как первый массив уже использован для
  // инициализации min и max.
  for (let i = 1; i < arrays.length; i++) {

    // currMin — минимальный элемент текущего
    // массива, гарантированно первый элемент,
    // так как массив отсортирован.
    const currMin = arrays[i][0];

    // currMax — максимальный элемент текущего
    // массива, гарантированно последний
    // элемент.
    const currMax = arrays[i].at(-1);

    // Обновляем значение result, выбирая
    // максимальное из:
    // 1. текущего результата;
    //
    // 2. |currMax - min| - расстояния между
    //    текущим локальным максимумом и
    //    глобальным минимумом;
    //
    // 3. |max - currMin| - расстояния между
    //    глобальным максимумом и текущим
    //    локальным минимумом.
    //
    // |currMax - min| и |max - currMin|
    // проверяют расстояния между элементами,
    // гарантированно взятыми из разных
    // массивов, что важно по условию
    // задачи.
    //
    // Math.abs используется для получения
    // абсолютного значения разницы.
    result = Math.max(
      result,
      Math.abs(currMax - min),
      Math.abs(max - currMin)
    );

    // Обновляем глобальный минимум:
    //
    // Выбираем минимальное значение между
    // существующим min и currMin текущего
    // массива.
    //
    // Это позволит учитывать самые маленькие
    // элементы среди всех массивов
    min = Math.min(min, currMin);

    // Обновляем глобальный максимум:
    // 
    // Выбираем максимальное значение между
    // существующим max и currMax текущего
    // массива.
    //
    // Так мы отслеживаем самый большой элемент
    // среди всех массивов
    max = Math.max(max, currMax);
  }

  // После обхода всех массивов возвращаем
  // максимальную дистанцию.
  //
  // Это наибольшая разница между двумя
  // элементами, выбранными из разных массивов.
  return result;
}
