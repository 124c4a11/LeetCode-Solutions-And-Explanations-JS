/**
 * @param {string} s
 * @return {boolean}
 * 
 * canPermutePalindrome проверяет, можно ли переставить символы
 * строки так, чтобы получился палиндром (строка, одинаково
 * читаемая слева направо и справа налево)
 * 
 * Параметры:
 * - s — строка, которую нужно проверить.
 * 
 * Возвращает:
 *   true, если таких символов не более одного, иначе false.
 *
 *   Это соответствует правилу: для палиндрома длины чётной все
 *   символы должны иметь чётные частоты, для нечётной — ровно
 *   один символ может иметь нечётную частоту.
 * 
 * 
 * Пример для:
 *   s = "code"
 * Результат:
 *   false
 * 
 * 
 * Пример для:
 *   s = "aab"
 * Результат:
 *   true ("aba")
 */
function canPermutePalindrome(s) {

  // Создаётся множество Set.
  //
  // Set используется для хранения символов, которые в
  // текущий момент встречаются в строке нечетное число
  // раз.
  //
  // Выбор Set оправдан тем, что операции has/add/delete
  // выполняются в среднем за O(1).
  const unpairedSet = new Set();

  // Итерация по каждому символу строки s
  for (const char of s) {

    // Проверка: содержится ли текущий символ char в
    // множестве unpairedSet.
    //
    // Если да, это означает, что до текущего шага
    // символ встречался нечетное число раз, и
    // текущая встреча делает общее количество
    // чётным.
    if (unpairedSet.has(char)) {

      // Удаляем символ из множества, потому что
      // теперь его количество вхождений стало
      // чётным - это означает, что для него есть
      // пара и он может быть использован для 
      // построения палиндрома
      unpairedSet.delete(char);
    } else {

      // Если символа нет в множестве, значит он
      // встретился впервые, или его количество
      // вхождений стало снова нечётным.
      //
      // Добавляем символ в множество, отмечая,
      // что он встречается нечетное число раз
      // и для него пока нет пары
      unpairedSet.add(char);
    }
  }

  // Возвращаем результат сравнения размера множества
  // unpairedSet с 1.
  //
  // Для строки, перестановка которой может образовать
  // палиндром, допустимо не более одного символа с
  // нечетной частотой:
  // - если длина строки чётная, то ни один символ не
  //   должен иметь нечетную частоту
  //   (unpairedSet.size === 0);
  //
  // - если длина строки нечётная, то ровно один
  //   символ может иметь нечетную частоту
  //   (unpairedSet.size === 1). Он будет стоять в
  //   центре палиндрома
  //
  // Выражение unpairedSet.size <= 1 объединяет оба
  // случая и возвращает true при их выполнении.
  return unpairedSet.size <= 1;
}
